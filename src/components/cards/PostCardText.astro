---
import type { Lang } from '@/utils/i18n';
import { categoryLabel, tagLabel } from '@/utils/translations';
import { formatDate } from '@/utils/date';

interface Props {
  href?: string;
  title: string;
  date?: string | Date;
  category?: string;
  tags?: string[];
  lang?: Lang;
  class?: string;
}

const {
  href,
  title,
  date,
  category,
  tags = [],
  lang = 'zh',
  class: className,
} = Astro.props as Props;

const Container = href ? 'a' : 'div';
const containerAttrs = href ? { href } : {};
---

<Container
  {...containerAttrs}
  class={`group block w-full overflow-hidden rounded-md px-2 py-2 transition-all duration-200 ease-out hover:-translate-y-0.5 hover:bg-base-200/40 ${className ?? ''}`.trim()}
>
  <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-4 text-sm">
    <time
      class="shrink-0 whitespace-nowrap text-base-content/70 [font-variant-numeric:tabular-nums]"
      datetime={date ? new Date(date).toISOString() : undefined}
    >
      {date ? formatDate(date, lang) : ''}
    </time>

    <div
      class="min-w-0 flex-1 truncate font-medium text-base-content decoration-1 underline-offset-2 group-hover:underline"
    >
      {title}
    </div>

    {
      tags.length > 0 && (
        <div class="flex flex-wrap items-center gap-1">
          {tags.map((tg) => (
            <span class="badge badge-outline badge-sm">{tagLabel(lang, tg)}</span>
          ))}
        </div>
      )
    }


  </div>
</Container>
