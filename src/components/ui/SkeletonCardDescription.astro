---
import Skeleton from './Skeleton.astro';

interface Props {
  aspectClass?: string;
  class?: string | undefined;
}

const { aspectClass = 'aspect-[16/9]', class: className = '' } = Astro.props as Props;
---

<div class={`block h-full overflow-hidden rounded-xl ${className}`.trim()} aria-label="加载中...">
  <!-- 移动端布局 -->
  <div class={`relative ${aspectClass} w-full overflow-hidden sm:hidden`}>
    <Skeleton variant="image" class="absolute inset-0 h-full w-full" rounded={false} />

    <div class="absolute inset-0 bg-gradient-to-b from-black/5 via-black/20 to-black/40"></div>

    <div class="absolute inset-x-0 bottom-0 p-4">
      <div class="flex items-center justify-between">
        <Skeleton variant="line" width="80px" height="12px" />
        <Skeleton variant="line" width="60px" height="12px" />
      </div>
      <div class="mt-1 space-y-2">
        <Skeleton variant="title" width="100%" height="18px" />
        <Skeleton variant="title" width="75%" height="18px" />
      </div>
    </div>
  </div>

  <!-- 桌面端布局 -->
  <div class="hidden h-full sm:flex sm:flex-col">
    <!-- 图片骨架 -->
    <div class={`relative ${aspectClass} w-full overflow-hidden`}>
      <Skeleton variant="image" class="absolute inset-0 h-full w-full" rounded={false} />
    </div>

    <!-- 内容骨架 -->
    <div class="flex flex-1 flex-col p-4">
      <!-- 标题 (2行) -->
      <div class="space-y-2">
        <Skeleton variant="title" width="100%" height="20px" />
        <Skeleton variant="title" width="80%" height="20px" />
      </div>

      <!-- 描述 (3行) -->
      <div class="mt-4 space-y-2">
        <Skeleton variant="text" width="100%" height="14px" />
        <Skeleton variant="text" width="100%" height="14px" />
        <Skeleton variant="text" width="65%" height="14px" />
      </div>

      <!-- 占位空间 -->
      <div class="h-4"></div>

      <!-- 底部日期和分类 -->
      <div class="mt-auto flex items-center justify-between">
        <Skeleton variant="line" width="70px" height="12px" />
        <Skeleton variant="line" width="50px" height="12px" />
      </div>
    </div>
  </div>
</div>
