---
import type { Lang } from '@/utils/i18n';
import { t } from '@/utils/translations';
import { NAV_ITEMS } from '@/utils/navItems';
import { getRelativeLocaleUrl } from 'astro:i18n';

interface Props {
  lang?: Lang;
  class?: string;
}
const { lang, class: className } = Astro.props as Props;
const resolvedLang = ((Astro.currentLocale as Lang | undefined) ??
  (lang as Lang | undefined) ??
  'zh') as Lang;
---

<nav class={`hidden w-full lg:flex ${className ?? ''}`.trim()}>
  <ul class="menu menu-sm menu-horizontal mx-auto px-1">
    <li>
      <a href={getRelativeLocaleUrl(resolvedLang, '/')} class="font-semibold">
        {t(resolvedLang, 'navigation.home')}
      </a>
    </li>
    {
      NAV_ITEMS.map((item) => (
        <li>
          <details>
            <summary class="font-semibold">
              {t(resolvedLang, `navigation.${item.key}`)}
            </summary>
            <ul class="rounded-box bg-base-100 p-2 shadow w-48 z-50">
              <li>
                <a href={getRelativeLocaleUrl(resolvedLang, `/category/${item.key}`)}>
                  {t(resolvedLang, `navigation.${item.key}`)}
                </a>
              </li>
              {item.tags.map((tag) => (
                <li>
                  <a href={getRelativeLocaleUrl(resolvedLang, `/tags/${tag}`)}>
                    {t(resolvedLang, `tags.${tag}`)}
                  </a>
                </li>
              ))}
            </ul>
          </details>
        </li>
      ))
    }
  </ul>
</nav>
