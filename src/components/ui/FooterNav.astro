---
import type { Lang } from '@/utils/i18n';
import { t } from '@/utils/translations';
import { NAV_ITEMS } from '@/utils/navItems';
import { getRelativeLocaleUrl } from 'astro:i18n';

interface Props {
  lang?: Lang;
  class?: string;
}
const { lang, class: className } = Astro.props as Props;
const resolvedLang = ((Astro.currentLocale as Lang | undefined) ??
  (lang as Lang | undefined) ??
  'zh') as Lang;
---

<div class={`grid grid-cols-2 gap-6 sm:grid-cols-4 ${className ?? ''}`.trim()}>
  {
    NAV_ITEMS.map((item) => (
      <div>
        <h3 class="mb-2 text-sm font-semibold">
          <a
            href={getRelativeLocaleUrl(resolvedLang, `/category/${item.key}`)}
            class="link link-hover"
          >
            {t(resolvedLang, `navigation.${item.key}`)}
          </a>
        </h3>
        <ul class="space-y-1">
          {item.tags.map((tag) => (
            <li>
              <a
                href={getRelativeLocaleUrl(resolvedLang, `/tags/${tag}`)}
                class="link link-hover text-sm"
              >
                {t(resolvedLang, `tags.${tag}`)}
              </a>
            </li>
          ))}
        </ul>
      </div>
    ))
  }

  <div>
    <h3 class="mb-2 text-sm font-semibold">
      {t(resolvedLang, 'footer.more')}
    </h3>
    <ul class="space-y-1">
      <li>
        <a
          href={getRelativeLocaleUrl(resolvedLang, '/category')}
          class="link link-hover text-sm"
        >
          {t(resolvedLang, 'footer.categories')}
        </a>
      </li>
      <li>
        <a
          href={getRelativeLocaleUrl(resolvedLang, '/tags')}
          class="link link-hover text-sm"
        >
          {t(resolvedLang, 'footer.tags')}
        </a>
      </li>
      <li>
        <a
          href={getRelativeLocaleUrl(resolvedLang, '/author')}
          class="link link-hover text-sm"
        >
          {t(resolvedLang, 'footer.author')}
        </a>
      </li>
    </ul>
  </div>
</div>
